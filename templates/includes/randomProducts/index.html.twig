<div class="container">
	<div class="row">
		<div class="col-lg-6 mb-lg-0 col mb-2">
			{% for starProduct in starProducts|filter(starProduct => starProduct.position == 1) %}
				<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}">
				<div class="card h-100 shadow">
					<img src="{{ ('/images/products/' ~ starProduct.product.image0)|imagine_filter('random_products_maxi') }}" class="card-img-top featured-image" alt="{{ starProduct.product.name }}">
					<div class="middle">
						<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}" class="product-text nav-link rounded btn btn-outline-light fw-bold">Voir</a>
					</div>
				</a>
					<div class="card-body">
						<h5 class="card-title">{{ starProduct.product.name }}</h5>
						<p class="card-text">{{ starProduct.product.summary }}</p>
					</div>
					<div class="card-body d-flex flex-column">
											{% set offers = starProduct.product.offers|filter(o => o.isActive == true)|filter(o => date(o.startedAT) < date() and date(o.endedAT) > date()) %}
						{% for offer in offers %}
							{% if loop.index0 == 0 %}
								<p class="card-text fw-bold text-decoration-line-through text-end fs-5 mt-auto">{{ starProduct.product.price / 100 }}
									€</p>
							{% endif %}
						{% endfor %}
						{% for offer in offers %}
							{% if offer.typeReduce == "percent" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold">
									-
									{{ offer.reduce }}
									%</p>
							{% endif %}
							{% if offer.typeReduce == "euro" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold">
									-
									{{ offer.reduce }}
									€</p>
							{% endif %}
						{% else %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ starProduct.product.price / 100}}
								€</p>
						{% endfor %}
						{% if offers| length > 0 %}
							{% set number = 0 %}
							{% set reduce = 0 %}
							{% set total = 0 %}
							{% for offer in offers %}
								{% if offer.typeReduce == "percent" %}
									{% set number = starProduct.product.price * offer.reduce / 100 %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - reduce %}
								{% endif %}
								{% if offer.typeReduce == "euro" %}
									{% set number = offer.reduce %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - (reduce * 100) %}
								{% endif %}
							{% endfor %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ total / 100 }}
								€</p>
						{% endif %}
					</div>
				</div>
			{% endfor %}
		</div>
		<div class="col-lg-6 col-sm-12">
			<div class="row mb-2">
				{% for i in 2..3 %}
					{% for starProduct in starProducts|filter(starProduct => starProduct.position == i) %}
						<div class="col-lg-6 mb-lg-0 col-12 mb-2">
							<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}">
								<div class="card h-100 shadow">
									<img src="{{ ('/images/products/' ~ starProduct.product.image0)|imagine_filter('random_products_mini') }}" class="card-img-top featured-image" alt="{{ starProduct.product.name }}">
									<div class="middle">
										<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}" class="product-text nav-link rounded btn btn-outline-light fw-bold">Voir</a>
									</div>
								</a>
								<div class="card-body">
									<h5 class="card-title">{{ starProduct.product.name }}</h5>
									<p class="card-text">{{ starProduct.product.summary }}</p>
								</div>
								<div class="card-body d-flex flex-column">
									{% set offers = starProduct.product.offers|filter(o => o.isActive == true)|filter(o => date(o.startedAT) < date() and date(o.endedAT) > date()) %}
						{% for offer in offers %}
							{% if loop.index0 == 0 %}
								<p class="card-text fw-bold text-decoration-line-through">{{ starProduct.product.price / 100 }}
									€</p>
							{% endif %}
						{% endfor %}
						{% for offer in offers %}
							{% if offer.typeReduce == "percent" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold">
									-
									{{ offer.reduce }}
									%</p>
							{% endif %}
							{% if offer.typeReduce == "euro" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold">
									-
									{{ offer.reduce }}
									€</p>
							{% endif %}
						{% else %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ starProduct.product.price / 100}}
								€</p>
						{% endfor %}
						{% if offers| length > 0 %}
							{% set number = 0 %}
							{% set reduce = 0 %}
							{% set total = 0 %}
							{% for offer in offers %}
								{% if offer.typeReduce == "percent" %}
									{% set number = starProduct.product.price * offer.reduce / 100 %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - reduce %}
								{% endif %}
								{% if offer.typeReduce == "euro" %}
									{% set number = offer.reduce %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - (reduce * 100) %}
								{% endif %}
							{% endfor %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ total / 100 }}
								€</p>
						{% endif %}
								</div>
							</div>
						</a>
					</div>
				{% endfor %}
			{% endfor %}
			</div>
			<div class="row">
				{% for i in 4..5 %}
					{% for starProduct in starProducts|filter(starProduct => starProduct.position == i) %}
						<div class="col-lg-6 mb-lg-0 col-12 mb-2">
							<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}">
							<div class="card h-100 shadow">
								<img src="{{ ('/images/products/' ~ starProduct.product.image0)|imagine_filter('random_products_mini') }}" class="card-img-top featured-image" alt="{{ starProduct.product.name }}">
								<div class="middle">
									<a href="{{ path('product_show', { parentCategory: starProduct.product.category.parent.slug, category: starProduct.product.category.slug, product: starProduct.product.slug }) }}" class="product-text nav-link rounded btn btn-outline-light fw-bold">Voir</a>
								</div>
							</a>
								<div class="card-body">
									<h5 class="card-title">{{ starProduct.product.name }}</h5>
									<p class="card-text">{{ starProduct.product.summary }}</p>
								</div>
								<div class="card-body d-flex flex-column">
									{% set offers = starProduct.product.offers|filter(o => o.isActive == true)|filter(o => date(o.startedAT) < date() and date(o.endedAT) > date()) %}
						{% for offer in offers %}
							{% if loop.index0 == 0 %}
								<p class="card-text fw-bold text-decoration-line-through">{{ starProduct.product.price / 100 }}
									€</p>
							{% endif %}
						{% endfor %}
						{% for offer in offers %}
							{% if offer.typeReduce == "percent" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold">
									-
									{{ offer.reduce }}
									%</p>
							{% endif %}
							{% if offer.typeReduce == "euro" %}
								<span class="badge bg-danger">{{ offer.name }}</span>
								<p class="card-text fw-bold text-end fs-5 mt-auto">
									-
									{{ offer.reduce }}
									€</p>
							{% endif %}
						{% else %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ starProduct.product.price / 100}}
								€</p>
						{% endfor %}
						{% if offers| length > 0 %}
							{% set number = 0 %}
							{% set reduce = 0 %}
							{% set total = 0 %}
							{% for offer in offers %}
								{% if offer.typeReduce == "percent" %}
									{% set number = starProduct.product.price * offer.reduce / 100 %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - reduce %}
								{% endif %}
								{% if offer.typeReduce == "euro" %}
									{% set number = offer.reduce %}
									{% set reduce = reduce + number %}
									{% set total = starProduct.product.price - (reduce * 100) %}
								{% endif %}
							{% endfor %}
							<p class="card-text fw-bold text-end fs-5 mt-auto">{{ total / 100 }}
								€</p>
						{% endif %}
								</div>
							</div>
						</div>
					{% endfor %}
				{% endfor %}
			</div>
		</div>
	</div>
</div>

