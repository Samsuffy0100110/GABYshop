{% extends 'base.html.twig' %}

{% block title %}
	Ma commande |
	{{ parent() }}
{% endblock %}

{% block body %}
	<div class="container">
		<h1>Commande n°{{ order.reference }}</h1>
		<a href="{{ path('account_orders') }}">Retour</a>
		<hr>
		<strong>Statut de la commande :
		</strong>
		{% if order.state == 1 %}
			Payée
		{% elseif order.state == 2 %}
			Préparation en cours
		{% elseif order.state == 3 %}
			Livraison en cours
		{% endif %}<br>
		<strong>Commande passé le :</strong>
		{{ order.createdAt |date('d-m-Y') }}<br>
		<strong>Référence de ma commande :</strong>
		{{ order.reference }}<br>
		<strong>Transporteur choisi :</strong>
		{{ shipping.name }}
		<br>
		<hr>
		<strong>Détails</strong>
		<table class="table mt-4">
			<thead>
				<tr>
					<th scope="col">Produit</th>
					<th scope="col">Quantité</th>
					<th scope="col">Prix unitaire</th>
					<th scope="col">Total</th>
				</tr>
			</thead>
			<tbody>
				{% for product in order.orderDetails %}
					<tr>
						<td>{{ product.product }}</td>
						<td>{{ product.quantity }}</td>
						<td>{{ (product.price / 100)|number_format(2, ',', '.', ' ') }}
							&euro;
						</td>
						<td>{{ ((product.total) / 100)|number_format(2, ',', '.', ' ') }}
							&euro;
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		<div class="row">
			<div class="col-lg-10"></div>
			<div class="col-lg-2 bg-light rounded mt-2 mb-5 p-3">
				<div class="text-end">
					<strong>Sous Total HT:</strong>
					{{ (order.getTotal / 100) - order.getTotal }}
					&euro;
					<hr>
					<strong>Sous-total TTC:
					</strong>
					{{ ((order.getTotal) / 100)|number_format(2, ',', '.', ' ') }}
					&euro;
					<hr>
					<strong>Livraison :
					</strong>
					{{ ((shipping.price))|number_format(2, ',', '.', ' ') }}
					&euro;
					<hr>
					<strong>Total :
					</strong>
					{{ ((order.getTotal) / 100 + shipping.price)|number_format(2, ',', '.', ' ') }}
					&euro;
				</div>
			</div>
		</div>
	</div>
{% endblock %}
