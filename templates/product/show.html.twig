{% extends 'base.html.twig' %}

{% block title %}Détail
	{{ product.name }}
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row">
			<div class="col-lg-12 ms-2 mb-5">
				<i>
					<small>
						<a href="{{ path('home')}}">Home</a>
						/Categorie/
						<a href="{{ path('category_index', { parentCategory: parentCategory.slug })}}">{{ parentCategory.name }}</a>
						/
						<a href="{{ path('product_index', { parentCategory: parentCategory.slug, category: category.slug })}}">{{ category.name }}</a>
						/
						<a class="fw-bold text-decoration-none link-dark">{{ product.name }}</a>
					</small>
				</i>
			</div>
		</div>
		<div class="row">
			<div class="col-lg mb-3">
				<div class="row">
					{% include "product/_gallery.html.twig" %}
				</div>
			</div>
			<div class="col-lg mb-3">
				<div class="card h-100">
					<div class="card-header">
						<h2 class="card-title">{{ product.name }}</h2>
					</div>
					<div class="card-body">
						{% include "product/_rating.html.twig" %}
						<p class="card-text mt-1">{{ product.summary }}</p>
						<h3 class="fs-bold text-end">{{ product.price }}
							€</h3>
						{% for attribut in attributs|sort((a,b)=>a.position <=> b.position) %}
							{% if attribut.quantity > 0 %}
								<div class="row m-2">
									<div class="col-auto">
										<div class="input-group-text">
											<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
										</div>
									</div>
									<div class="col-auto">
										<input class="form-control text-center" type="text" value="{{ attribut.name }}" aria-label="{{ attribut.name }}" readonly>
									</div>
									<div class="col-auto">
										<select for="quantity" class="form-select" aria-label="Default select">
											<option selected>0</option>
											<option select name="quantity" id="quantity">
												{% for i in 1..attribut.quantity %}
													<option value="{{ i }}">{{ i }}</option>
												{% endfor %}
											</option>
										</select>
									</div>
								</div>
							{% else %}
								<div class="row m-2">
									<div class="col-auto">
										<div class="input-group-text">
											<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3" disabled>
										</div>
									</div>
									<div class="col-auto">
										<input class="form-control text-center" type="text" value="{{ attribut.name }}" aria-label="{{ attribut.name }}" readonly>
									</div>
									<div class="col-auto">
										<input class="form-control text-center" type="text" value="Rupture" aria-label="Produit en rupture" readonly>
									</div>
								</div>
							{% endif %}
						{% endfor %}
					</div>
					<div class="card-footer">
						{% if attributs is not empty and attributs|filter((a)=>a.quantity > 0) is not empty %}
							<a href="#" class="card-link btn btn-primary">Ajouter au panier</a>
						{% else %}
							<h5 class="mt-2 text-center">Produit victime de son succés !</h5>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
		<div class="row mb-3">
			<div class="col-12">
				<div class="card text-center mt-2 mb-2">
					<div class="card-header">
						<ul class="nav nav-tabs card-header-tabs">
							<li class="nav-item">
								<a class="nav-link active" aria-current="true" href="#">Details</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">Commentaires</a>
							</li>
						</ul>
					</div>
					<div class="card-body">
						<h5 class="card-title">{{ product.name }}</h5>
						<p class="card-text">{{ product.description }}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="row mb-3">
			{% include "product/_similar-products.html.twig" %}
		</div>
	</div>
{% endblock %}
